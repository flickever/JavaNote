# Redis入门

### 使用场景

1. 作为缓存使用，网站并发量大的情况下，很多人使用了这套解决方案，包括持久化数据的缓存，包括状态化数据的缓存。

2. 排队使用，许多网站有秒杀、抢购的功能，这种功能即时性非常强，需要用高效的机制，发布库存的时候，可以把库存信息存在redis，这样用户购买后redis就减少，这样就不会造成短时间的阻塞。

3. 异步通信，服务A作为生成者，服务B作为消费者，可以代替笨重的webservice或者http，高效的作为服务之间的通信。

4. 日志记录，redis与logstash使用，处理了分布式日志系统问题。logstash的agent收集日志发送到redis，另外一台中央logstash从redis读取日志，集中处理。



### 基础数据结构

redis一共有五种数据结构：string（字符串）、list（列表）、hash（字典）、set（集合）、zset（有序集合）

**string（字符串）**

字符串string是redis中最简单的数据结构，如下例子，内部表示是一个字符数组

|  H   |  E   |  L   |  L   |  0   |  W   |  O   |  R   |  L   |  D   |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |

string结构使用非常广泛，一个常见用途是缓存用户信息；

redis字符串是动态字符串，可以修改，内部结构类似Java的ArrayList，预先分配冗余空间减少内存频繁分配；

内部为当前字符串分配的实际空间capacity一般大于实际字符串长度len，字符串长度小于1MB时，每次扩容都是加倍现有空间，长度超过1MB后，每次扩容增加1MB

字符串最大长度为512MB

